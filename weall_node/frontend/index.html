<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>WeAll — Global Feed</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-store" />
  <link rel="icon" href="/frontend/favicon.svg" />
  <link rel="stylesheet" href="/frontend/style.css" />
  <style>
    :root {
      --bg: #0b1020;
      --fg: #e6edf3;
      --muted: rgba(230,237,243,0.72);
      --card: rgba(16,18,24,0.72);
      --border: rgba(58,65,80,0.55);
      --accent: #6ee7b7;
      --danger: #fb7185;
    }

    body {
      margin: 0;
      color: var(--fg);
      background:
        radial-gradient(circle at 30% 20%, #22c55e 0, #0ea5e9 45%, #6366f1 85%),
        radial-gradient(circle at 80% 80%, rgba(99,102,241,0.25), transparent 55%),
        rgba(15,23,42,0.96);
      min-height: 100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    .shell {
      max-width: 1080px;
      margin: 0 auto;
      padding: 18px 14px 40px;
    }

    header.topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.9rem;
      margin: 10px 0 14px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }

    .brand-mark {
      width: 36px;
      height: 36px;
      border-radius: 12px;
      background:
        radial-gradient(circle at 20% 20%, rgba(110,231,183,0.85), transparent 60%),
        radial-gradient(circle at 80% 70%, rgba(56,189,248,0.75), transparent 55%),
        rgba(15,23,42,0.92);
      border: 1px solid rgba(15,23,42,0.9);
      box-shadow: 0 10px 25px rgba(0,0,0,0.35);
    }

    .brand h1 {
      margin: 0;
      font-size: 18px;
      letter-spacing: 0.2px;
      line-height: 1.1;
    }

    .brand p {
      margin: 3px 0 0;
      font-size: 12px;
      color: var(--muted);
      max-width: 680px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.25);
      backdrop-filter: blur(8px);
    }

    .card h2 {
      margin: 0 0 6px;
      font-size: 14px;
    }

    .card p {
      margin: 0 0 12px;
      font-size: 13px;
      color: var(--muted);
    }

    label {
      display: block;
      font-size: 12px;
      color: var(--muted);
      margin: 10px 0 6px;
    }

    textarea {
      width: 100%;
      min-height: 96px;
      resize: vertical;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(34,40,54,.9);
      background: rgba(0,0,0,0.25);
      color: var(--fg);
      outline: none;
      font-size: 14px;
      box-sizing: border-box;
    }

    input[type="file"]{
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(34,40,54,.9);
      background: rgba(0,0,0,0.25);
      color: var(--muted);
      box-sizing: border-box;
    }

    .composer-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .composer-note {
      font-size: 12px;
      color: var(--muted);
    }

    .btn {
      border: 1px solid rgba(34,40,54,.9);
      background: rgba(17,21,27,.7);
      color: var(--fg);
      border-radius: 12px;
      padding: 10px 12px;
      cursor: pointer;
      font-weight: 800;
      font-size: 13px;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn.primary {
      border-color: rgba(110,231,183,.65);
    }

    .btn:disabled {
      opacity: .55;
      cursor: default;
    }

    .status {
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }
    .status.ok { color: var(--accent); }
    .status.err { color: var(--danger); }
    .status.warn { color: #fbbf24; }

    .feed-header-row {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .feed-header-row span {
      font-size: 12px;
      color: var(--muted);
    }

    .feed-list .empty {
      font-size: 13px;
      color: var(--muted);
      padding: 10px 0;
    }

    footer.weall-footer {
      margin-top: 18px;
      border-top: 1px solid rgba(34,40,54,.8);
      padding: 14px 2px 0;
      font-size: 12px;
      color: var(--muted);
      text-align: center;
    }
    footer.weall-footer a { color: var(--muted); text-decoration: none; }
    footer.weall-footer a:hover { text-decoration: underline; color: var(--fg); }
  </style>

  <script src="/frontend/env.js"></script>
</head>

<body>
  <div id="weall_nav"></div>

  <div class="shell">
    <header class="topbar">
      <div class="brand">
        <div class="brand-mark"></div>
        <div>
          <h1>WeAll — Global Feed</h1>
          <p>
            Tier 1 can view. Tier 2 can like/comment. Tier 3 can post content (and attach media).
            Moderation is handled by the network via dispute flow.
          </p>
        </div>
      </div>
    </header>

    <main>
      <!-- Composer -->
      <section class="card">
        <h2>Share something</h2>
        <p>Short text notes are enough for Genesis. Tier 3 can also attach media (stored on IPFS).</p>

        <label for="postText">Your message</label>
        <textarea id="postText" placeholder="What are you working on for the commons?"></textarea>

        <label for="postFile">Attach media (Tier 3)</label>
        <input id="postFile" type="file" accept="image/*,video/*" />

        <div class="composer-footer">
          <div class="composer-note" id="composerNote">
            Tip: Ctrl+Enter posts. Group feed UI lives in Groups.
          </div>

          <button class="btn primary" id="btnPost">Post</button>
        </div>

        <div class="status" id="postStatus"></div>
      </section>

      <!-- Feed -->
      <section class="card" style="margin-top:12px;">
        <div class="feed-header-row">
          <h2>Global feed</h2>
          <span id="feedMeta">Loading…</span>
        </div>
        <div id="feedList" class="feed-list"></div>
        <div class="status" id="feedStatus"></div>
      </section>
    </main>

    <footer class="weall-footer">
      <span>© <span id="footer-year">2024</span> WeAll</span>
      &nbsp;•&nbsp;<a href="/frontend/privacy.html">Privacy</a>
      &nbsp;•&nbsp;<a href="/frontend/terms.html">Terms</a>
    </footer>
  </div>

  <script src="/frontend/auth.js"></script>
  <script src="/frontend/session.js"></script>
  <script src="/frontend/nav.js"></script>
  <script src="/frontend/footer.js"></script>
  <script src="/frontend/tiktok.js"></script>
</body>
</html>
